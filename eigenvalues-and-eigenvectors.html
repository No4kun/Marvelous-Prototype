<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Marvelous Learning - 固有値・固有ベクトルの探求</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="course-navigation.css">
    <link rel="stylesheet" href="eigenvalues-and-eigenvectors.css">
</head>
<body>
    <header>
        <div class="header-nav">
            <button class="home-btn" onclick="window.location.href='index.html'" title="ホームページに戻る">
                <i class="fas fa-home"></i>
                <span>ホーム</span>
            </button>
            <div class="course-info">
                <h1>🎯 Marvelous Learning Platform</h1>
                <h2>固有値・固有ベクトルと線形変換の深層理解</h2>
            </div>
            <div class="header-actions">
                <button class="pause-btn" onclick="pauseLearning()" title="学習を一時停止">
                    <i class="fas fa-pause"></i>
                    <span>一時停止</span>
                </button>
            </div>
        </div>
    </header>

    <nav class="topic-nav">
        <button class="nav-btn active" data-section="introduction">導入</button>
        <button class="nav-btn" data-section="definition">定義</button>
        <button class="nav-btn" data-section="visualization">視覚化</button>
        <button class="nav-btn" data-section="applications">応用</button>
        <button class="nav-btn" data-section="problems">演習</button>
    </nav>

    <main>
        <!-- 導入セクション -->
        <section id="introduction" class="content-section active">
            <h3>🌟 なぜ固有値・固有ベクトルを学ぶのか？</h3>
            
            <div class="concept-box">
                <h4>物理的直感</h4>
                <p>固有ベクトルは「線形変換によって方向が変わらないベクトル」です。これは物理学において：</p>
                <ul>
                    <li><strong>振動系</strong>: 分子の振動モード、建物の固有振動</li>
                    <li><strong>回転体</strong>: 慣性主軸、角運動量保存</li>
                    <li><strong>量子力学</strong>: エネルギー固有状態、観測可能量</li>
                </ul>
            </div>

            <div class="interactive-demo" id="intro-demo">
                <p>右のキャンバスで、さまざまな行列変換を試してみてください。青いベクトルがどのように変化するか観察しましょう。</p>
            </div>
        </section>

        <!-- 定義セクション -->
        <section id="definition" class="content-section">
            <h3>📐 数学的定義</h3>
            
            <div class="definition-box">
                <h4>固有値・固有ベクトル</h4>
                <p>正方行列 \(A\) に対して、零ベクトルでないベクトル \(\mathbf{v}\) が存在し、</p>
                <div class="math-center">
                    \[A\mathbf{v} = \lambda\mathbf{v}\]
                </div>
                <p>を満たすとき、\(\lambda\) を<strong>固有値</strong>、\(\mathbf{v}\) を<strong>固有ベクトル</strong>という。</p>
            </div>

            <div class="derivation-box">
                <h4>特性方程式の導出</h4>
                <p>固有値を求めるには、次の特性方程式を解きます：</p>
                <div class="math-center">
                    \[\det(A - \lambda I) = 0\]
                </div>
                <p>これは \(A\mathbf{v} = \lambda\mathbf{v}\) を \((A - \lambda I)\mathbf{v} = \mathbf{0}\) に変形し、非自明解の存在条件から導かれます。</p>
            </div>

            <div class="matrix-input">
                <h4>🧮 行列を入力して固有値を計算</h4>
                <div class="matrix-grid">
                    <input type="number" id="a11" value="3" step="0.1">
                    <input type="number" id="a12" value="1" step="0.1">
                    <input type="number" id="a21" value="0" step="0.1">
                    <input type="number" id="a22" value="2" step="0.1">
                </div>
                <button onclick="calculateEigenvaluesFromInput()">固有値を計算</button>
                <div id="eigenvalue-result"></div>
            </div>
        </section>

        <!-- 視覚化セクション -->
        <section id="visualization" class="content-section">
            <h3>👁️ インタラクティブ視覚化</h3>
            
            <div class="visualization-controls">
                <h4>変換行列のパラメータ</h4>
                <p>スライダーを動かして線形変換を調整し、「変換をアニメーション」ボタンで3Blue1Brownスタイルの変換を見てみましょう！</p>
                <div class="slider-group">
                    <label>a₁₁: <span id="a11-value">1.5</span></label>
                    <input type="range" id="a11-slider" min="-3" max="3" step="0.1" value="1.5">
                </div>
                <div class="slider-group">
                    <label>a₁₂: <span id="a12-value">0.5</span></label>
                    <input type="range" id="a12-slider" min="-3" max="3" step="0.1" value="0.5">
                </div>
                <div class="slider-group">
                    <label>a₂₁: <span id="a21-value">0.5</span></label>
                    <input type="range" id="a21-slider" min="-3" max="3" step="0.1" value="0.5">
                </div>
                <div class="slider-group">
                    <label>a₂₂: <span id="a22-value">1.5</span></label>
                    <input type="range" id="a22-slider" min="-3" max="3" step="0.1" value="1.5">
                </div>
                
                <div class="animation-controls">
                    <button onclick="animateTransformation()">🎬 変換をアニメーション</button>
                    <button onclick="resetVisualization()">🔄 リセット</button>
                </div>
                
                <div class="legend">
                    <h5>凡例</h5>
                    <p><span style="color: #f05050;">■</span> î (x軸基底ベクトル)</p>
                    <p><span style="color: #50f050;">■</span> ĵ (y軸基底ベクトル)</p>
                    <p><span style="color: #ffdc64;">■</span> 固有ベクトル（固有値付き）</p>
                    <p><span style="color: #4682b4;">■</span> 変形するグリッド</p>
                </div>
            </div>

            <div id="canvas-container"></div>
            
            <div class="eigeninfo">
                <h4>現在の行列の固有値・固有ベクトル</h4>
                <div id="current-eigeninfo"></div>
            </div>
        </section>

        <!-- 応用セクション -->
        <section id="applications" class="content-section">
            <h3>🔬 物理・工学への応用</h3>
            
            <div class="application-grid">
                <div class="app-card">
                    <h4>🏗️ 構造力学</h4>
                    <p>建物の固有振動数は構造の固有値問題として解析されます。地震に対する共振を避けるため、設計において重要な考慮事項です。</p>
                    <div class="math-center">
                        \[K\mathbf{u} = \omega^2 M\mathbf{u}\]
                    </div>
                </div>
                
                <div class="app-card">
                    <h4>⚛️ 量子力学</h4>
                    <p>ハミルトニアンの固有値はエネルギー準位、固有ベクトルは波動関数に対応します。</p>
                    <div class="math-center">
                        \[\hat{H}\psi = E\psi\]
                    </div>
                </div>
                
                <div class="app-card">
                    <h4>🎭 主成分分析 (PCA)</h4>
                    <p>データの共分散行列の固有ベクトルが主成分方向を示し、次元削減に利用されます。</p>
                </div>
                
                <div class="app-card">
                    <h4>🌐 PageRank アルゴリズム</h4>
                    <p>Googleの検索エンジンの核心技術。Webページの重要度を隣接行列の固有ベクトルで計算します。</p>
                </div>
            </div>
        </section>

        <!-- 演習セクション -->
        <section id="problems" class="content-section">
            <h3>✏️ 発展的演習問題</h3>
            
            <div class="problem-set">
                <div class="problem">
                    <h4>問題1: 固有値の計算</h4>
                    <p>行列 \(\begin{pmatrix} 3 & 1 \\ 1 & 3 \end{pmatrix}\) の固有値はどれですか？</p>
                    <div class="choices">
                        <label class="choice-item">
                            <input type="radio" name="q1" value="A">
                            <span class="choice-label">A) λ₁ = 2, λ₂ = 4</span>
                        </label>
                        <label class="choice-item">
                            <input type="radio" name="q1" value="B">
                            <span class="choice-label">B) λ₁ = 4, λ₂ = 2</span>
                        </label>
                        <label class="choice-item">
                            <input type="radio" name="q1" value="C">
                            <span class="choice-label">C) λ₁ = 3, λ₂ = 1</span>
                        </label>
                        <label class="choice-item">
                            <input type="radio" name="q1" value="D">
                            <span class="choice-label">D) λ₁ = 1, λ₂ = 5</span>
                        </label>
                    </div>
                    <button class="check-btn" onclick="checkAnswer(1, 'B')">解答をチェック</button>
                    <div class="feedback" id="feedback-1"></div>
                    <button class="solution-btn" onclick="toggleSolution(1)">詳細解答を表示</button>
                    <div class="solution" id="solution-1">
                        <p><strong>解答:</strong></p>
                        <p>特性方程式: \(\det\begin{pmatrix} 3-\lambda & 1 \\ 1 & 3-\lambda \end{pmatrix} = (3-\lambda)^2 - 1 = 0\)</p>
                        <p>\(\lambda^2 - 6\lambda + 8 = 0\)</p>
                        <p>\((\lambda - 4)(\lambda - 2) = 0\)</p>
                        <p>固有値: \(\lambda_1 = 4, \lambda_2 = 2\)</p>
                        <p><strong>幾何学的意味:</strong> 対角線方向に4倍拡大、反対角線方向に2倍拡大</p>
                    </div>
                </div>
                
                <div class="problem">
                    <h4>問題2: 固有ベクトルの物理的解釈</h4>
                    <p>振動系において、固有ベクトルが表す物理的意味は何ですか？</p>
                    <div class="choices">
                        <label class="choice-item">
                            <input type="radio" name="q2" value="A">
                            <span class="choice-label">A) 振動の周波数</span>
                        </label>
                        <label class="choice-item">
                            <input type="radio" name="q2" value="B">
                            <span class="choice-label">B) 振動のモード（振動パターン）</span>
                        </label>
                        <label class="choice-item">
                            <input type="radio" name="q2" value="C">
                            <span class="choice-label">C) 振動の初期条件</span>
                        </label>
                        <label class="choice-item">
                            <input type="radio" name="q2" value="D">
                            <span class="choice-label">D) 減衰係数</span>
                        </label>
                    </div>
                    <button class="check-btn" onclick="checkAnswer(2, 'B')">解答をチェック</button>
                    <div class="feedback" id="feedback-2"></div>
                    <button class="solution-btn" onclick="toggleSolution(2)">詳細解答を表示</button>
                    <div class="solution" id="solution-2">
                        <p><strong>解答:</strong></p>
                        <p>固有ベクトルは振動のモード（振動パターン）を表します。</p>
                        <p>• 各固有ベクトルは特定の振動パターンを示す</p>
                        <p>• 固有値は対応する固有振動数の二乗に比例</p>
                        <p>• 実際の振動は固有モードの線形結合で表現される</p>
                        <p><strong>例:</strong> 2自由度系では、同相振動と逆相振動という2つのモードが存在</p>
                    </div>
                </div>

                <div class="problem">
                    <h4>問題3: 行列式と固有値の関係</h4>
                    <p>2×2行列の行列式と固有値の積の関係はどれですか？</p>
                    <div class="choices">
                        <label class="choice-item">
                            <input type="radio" name="q3" value="A">
                            <span class="choice-label">A) det(A) = λ₁ + λ₂</span>
                        </label>
                        <label class="choice-item">
                            <input type="radio" name="q3" value="B">
                            <span class="choice-label">B) det(A) = λ₁ × λ₂</span>
                        </label>
                        <label class="choice-item">
                            <input type="radio" name="q3" value="C">
                            <span class="choice-label">C) det(A) = λ₁ - λ₂</span>
                        </label>
                        <label class="choice-item">
                            <input type="radio" name="q3" value="D">
                            <span class="choice-label">D) det(A) = λ₁ / λ₂</span>
                        </label>
                    </div>
                    <button class="check-btn" onclick="checkAnswer(3, 'B')">解答をチェック</button>
                    <div class="feedback" id="feedback-3"></div>
                    <button class="solution-btn" onclick="toggleSolution(3)">詳細解答を表示</button>
                    <div class="solution" id="solution-3">
                        <p><strong>解答:</strong></p>
                        <p>行列式は固有値の積に等しい: \(\det(A) = \lambda_1 \times \lambda_2\)</p>
                        <p><strong>証明:</strong></p>
                        <p>特性多項式: \(\det(A - \lambda I) = \lambda^2 - \text{tr}(A)\lambda + \det(A)\)</p>
                        <p>根と係数の関係より: \(\lambda_1 \times \lambda_2 = \det(A)\)</p>
                        <p><strong>幾何学的意味:</strong> 行列式は面積の拡大率、固有値の積も同様の意味を持つ</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <p>© 2025 Marvelous Learning Platform - 高度な数学・物理学習のために</p>
    </footer>

    <!-- ナビゲーション用JavaScript -->
    <script>
        function pauseLearning() {
            if (confirm('学習を一時停止してホームページに戻りますか？')) {
                window.location.href = 'index.html';
            }
        }
        
        document.addEventListener('DOMContentLoaded', function() {
            if (document.referrer.includes('index.html') || document.referrer.endsWith('/')) {
                setTimeout(() => {
                    const toast = document.createElement('div');
                    toast.className = 'welcome-toast';
                    toast.innerHTML = `
                        <div class="toast-content">
                            <i class="fas fa-calculator"></i>
                            <div class="toast-text">
                                <strong>固有値・固有ベクトル講座へようこそ！</strong>
                                <p>左上のホームボタンでいつでも戻れます</p>
                            </div>
                        </div>
                    `;
                    document.body.appendChild(toast);
                    setTimeout(() => toast.style.transform = 'translateX(0)', 100);
                    setTimeout(() => {
                        toast.style.transform = 'translateX(100%)';
                        setTimeout(() => toast.remove(), 300);
                    }, 4000);
                }, 1000);
            }
        });
    </script>

    <script src="eigenvalues-and-eigenvectors.js"></script>
</body>
</html>
